<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MySelamat</title>
  <link rel="stylesheet" href="css/menu.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="stylesheet" href="css/home.css">
</head>

<body class="home-page">
  <div class="container">
    <header>
      <h1>MySelamat</h1>
    </header>

    <!-- Flood Risk & Safe Routes Map -->
    <section class="flood-prediction">
      <h2>Flood Risk Map</h2>

      <!-- Advice Panel -->
      <div class="panel">
        <div id="advice" class="row muted">Loading…</div>
        <div id="updated" class="row muted"></div>
      </div>

      <div class="map-container">
        <div id="map"></div>
      </div>

      <div class="info-bar">
        <!-- Legend -->
        <div class="legend"></div>

        <!-- ETA Box -->
        <div class="eta-box">
          <div class="eta-title">Route ETA & Distance</div>
          <div class="eta-desc-row">Tap a safe zone and press “Safe Route”.</div>
        </div>
      </div>


      <!-- Emergency Escape button -->
      <button class="submit-btn fab">Emergency Escape</button>
      <script>
        document.querySelector('.submit-btn').addEventListener('click', function () {
          window.location.href = 'user-report.html';
        });
      </script>
    </section>

    <!-- Menu section -->
    <div id="menu-container"></div>
    <script src="script.js"></script>
    <script>
      fetch("menu.html")
        .then(res => res.text())
        .then(html => {
          document.getElementById("menu-container").innerHTML = html;

          // Mark active nav item
          const pageClass = document.body.classList[0]; // e.g. "home-page"
          const activePage = pageClass.replace("-page", "");
          document.querySelectorAll("#menu-container .nav-item").forEach(item => {
            if (item.dataset.page === activePage) {
              item.classList.add("active");
            }
          });
        });
    </script>
    <script defer src="map.js"></script>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAupowXVdjw9VQESNxsqBeWskKjXvfeTZE&libraries=maps&callback=initMap"
      defer>
      </script>
  </div>
</body>

</html>